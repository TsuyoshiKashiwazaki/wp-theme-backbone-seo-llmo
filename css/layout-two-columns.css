/* ========================================
   2カラムレイアウト（メイン:サイドバー = 7:3）
======================================== */

/* 2カラム：PC（1280px以上） */
@media (min-width: 1280px) {

    /* 右サイドバー（デフォルト） */
    body.layout-two-columns.sidebar-right .main-content {
        grid-template-columns: 1fr var(--sidebar-width, 320px);
        grid-template-areas: "content sidebar1";
        width: 100%;
        margin: 0 auto;
        gap: 30px;
        padding: 0 20px;
    }

    /* 左サイドバー */
    body.layout-two-columns.sidebar-left .main-content {
        grid-template-columns: var(--sidebar-width, 320px) 1fr;
        grid-template-areas: "sidebar1 content";
        width: 100%;
        margin: 0 auto;
        gap: 30px;
        padding: 0 20px;
        justify-items: start;
    }

    /* PCサイズでコンテンツエリアとサイドバーのgrid-areaを設定 */
    body.layout-two-columns .content-area {
        grid-area: content;
        padding: 15px !important;
    }

    body.layout-two-columns .sidebar-1 {
        grid-area: sidebar1;
    }
}

/* スマホサイズで適度な余白を設定 */
@media (max-width: 767px) {
    body.layout-two-columns .main-content {
        padding: 10px 0;
        width: 100vw;
        margin-left: calc(-50vw + 50%);
    }
    
    body.layout-two-columns .content-area {
        width: 100% !important;
        max-width: none !important;
        padding: 10px 8px !important;
        box-sizing: border-box !important;
        margin-bottom: 20px !important;
    }
    
    body.layout-two-columns .sidebar-1 {
        width: 100% !important;
        padding: 15px 12px !important;
        box-sizing: border-box !important;
        border-top: 1px solid #e0e0e0;
        margin-top: 20px !important;
    }

    /* サイドバー位置の適用 */
    body.layout-two-columns .content-area {
        grid-area: content;
        width: auto;
        min-width: 0;
    }

    body.layout-two-columns .sidebar-1 {
        grid-area: sidebar1;
        width: auto;
        min-width: 0;
        max-width: none;
    }
}

/* 2カラム：スマホ・タブレット（1279px以下）では縦配置 */
@media (max-width: 1279px) {
    body.layout-two-columns .main-content {
        grid-template-columns: 1fr;
        grid-template-areas:
            "content"
            "sidebar1";
        gap: 20px;
        padding: 15px 12px;
    }

    body.layout-two-columns .content-area {
        grid-area: content;
        order: 1;
        padding: 15px !important;
        margin-bottom: 20px !important;
    }

    body.layout-two-columns .sidebar-1 {
        grid-area: sidebar1;
        order: 2;
        width: 100%;
        max-width: none;
        min-width: 0;
        padding: 20px 12px !important;
        border-top: 2px solid #e0e0e0;
        margin-top: 20px !important;
    }
}

/* 2カラム：サイドバー1を表示、サイドバー2は非表示 */
body.layout-two-columns .sidebar-1 {
    display: block;
}

body.layout-two-columns .sidebar-2 {
    visibility: hidden;
    position: absolute;
    left: -9999px;
    /* ウィジェット編集時は表示されるように、display: noneではなくvisibility: hiddenを使用 */
}

/* ただし、ウィジェット編集時は表示 */
body.layout-two-columns.customize-preview .sidebar-2,
body.layout-two-columns.wp-admin .sidebar-2 {
    visibility: visible;
    position: static;
    left: auto;
    display: block;
}

/* 2カラム：基本設定（すべての場合に適用） */
body.layout-two-columns .main-content {
    display: grid;
    gap: 10px;
    background-color: var(--background-color);
}


/* 2カラム：グリッドが使えない場合のフレックスフォールバック */
@supports not (display: grid) {
    body.layout-two-columns .main-content {
        display: flex;
        flex-direction: column;
    }

    body.layout-two-columns .content-area {
        flex: 1;
        min-width: 0;
        order: 1;
    }

    body.layout-two-columns .sidebar-1 {
        flex: 0 0 auto;
        min-width: 0;
        order: 2;
        width: 100%;
        max-width: none;
    }
}

