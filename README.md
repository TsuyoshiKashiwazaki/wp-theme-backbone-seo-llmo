# Backbone Theme for SEO + LLMO

[![WordPress](https://img.shields.io/badge/WordPress-5.0%2B-blue.svg)](https://wordpress.org/)
[![PHP](https://img.shields.io/badge/PHP-7.2%2B-purple.svg)](https://php.net/)
[![License](https://img.shields.io/badge/License-GPL--2.0--or--later-green.svg)](https://www.gnu.org/licenses/gpl-2.0.html)
[![Version](https://img.shields.io/badge/Version-1.0.29-orange.svg)](https://github.com/TsuyoshiKashiwazaki/wp-theme-backbone-seo-llmo/releases)

![Backbone Theme Screenshot](screenshot.png)

メディアサイト向けに最適化された軽量WordPressベーステーマ。SEO・LLMO対応機能を内蔵し、プラグインによる拡張を前提とした設計。

> 専用プラグインとの連携で効率的なメディア運用を実現する軽量ベーステーマ

## 概要

Backbone Theme for SEO + LLMO は、メディア運用に特化したシンプルなWordPressベーステーマです。基本的なSEO対応とレイアウト機能を提供し、高度な機能は専用プラグイン（SEO・LLMO・GEO・AIO最適化プラグイン）での拡張を前提とした設計です。テーマとプラグインの組み合わせにより、効率的なメディアサイト・ブログ運用を実現します。

### 主な機能

- **プラグイン優先設計** - 専用プラグインによる拡張を前提とした設計
- **基本SEO対応** - メタディスクリプション抽出、タイトル最適化
- **柔軟なレイアウト** - 1〜3カラムレイアウト、フルワイド対応
- **カスタマイザー連携** - 基本的なカラー・デザイン調整
- **メディア最適化** - ブログ・メディアサイト向けに最適化
- **軽量設計** - 必要最小限の機能のみ搭載
- **レスポンシブ** - モバイルファースト設計
- **開発者向け機能** - キャッシュバスティング機能搭載

## クイックスタート

### インストール

1. テーマのZIPファイルをダウンロード
2. WordPress管理画面: **外観** → **テーマ** → **新規追加** → **テーマのアップロード**
3. ZIPファイルを選択してインストール
4. テーマを有効化

### 動作環境

- WordPress 5.0 以上
- PHP 7.2 以上
- HTML5対応のモダンブラウザ

## テーマ構造

### テンプレートファイル

- `front-page.php` - フロントページテンプレート
- `home.php` - ブログホームページテンプレート
- `single.php` - 投稿詳細テンプレート
- `page.php` - 固定ページテンプレート
- `archive.php` - アーカイブテンプレート
- `search.php` - 検索結果テンプレート
- `404.php` - 404エラーページテンプレート
- `comments.php` - コメントテンプレート
- `sidebar.php` - サイドバーテンプレート

### ディレクトリ構造

```
/css/              - スタイルシート（base, layouts, components等）
/inc/              - PHPインクルードファイル（機能モジュール）
/inc/utilities/    - ユーティリティ関数
/inc/customizer/   - カスタマイザー設定
/js/               - JavaScriptファイル（カスタマイザー関連）
```

## カスタマイザー設定

WordPressカスタマイザーから以下の設定にアクセスできます:

- **カラー設定** - テーマカラー、背景色、テキストカラー
- **レイアウト設定** - カラム数、サイドバー位置、コンテナ幅
- **タイポグラフィ設定** - フォント、サイズ、行間
- **デザインパターン** - ボタンスタイル、カードなどのデザイン要素
- **ヘッダー/フッター設定** - ロゴ、メニュー、ウィジェットエリア

## ウィジェットエリア

- サイドバーウィジェットエリア
- フッターウィジェットエリア（複数カラム対応）

## SEO機能

### 内蔵SEO機能

- **メタディスクリプション自動抽出** - 抜粋または本文の最初の25語から抽出
- **タイトルタグ最適化** - カスタマイズ可能な区切り文字、自動タイトル生成
- **固定ページSEO拡張** - 抜粋フィールドとタグのサポート
- **SEOフレンドリーURL** - パーマリンク構造の自動最適化
- **HTML5セマンティックマークアップ** - 検索エンジンフレンドリーな構造
- **レスポンシブデザイン** - モバイルファースト対応

### プラグインによる拡張

高度なSEO機能は「SEO・LLMO・GEO・AIO最適化プラグイン」などの専用プラグインで追加することを想定:

- 構造化データ（JSON-LD、Schema.org）
- Open Graphタグ（Facebook等のSNS）
- Twitter Cardタグ
- Canonical URLタグ
- 高度なrobotsメタタグ制御

## 開発者向け機能

### キャッシュバスティング

開発時のキャッシュ問題を解決するため、CSSとJavaScriptファイルにタイムスタンプベースのバージョニングを実装。カスタマイザーでオン/オフの切り替えが可能。

### ユーティリティ関数

以下のユーティリティモジュールを搭載:

- `core-utilities.php` - コア機能ヘルパー関数
- `layout-utilities.php` - レイアウト関連関数
- `typography-utilities.php` - タイポグラフィ関数
- `color-utilities.php` - カラー処理関数
- `design-utilities.php` - デザインパターン関数
- `decoration-utilities.php` - 装飾関連関数

## WordPressテーマサポート

- カスタムロゴ
- カスタムメニュー（メイン、フッター）
- アイキャッチ画像
- HTML5マークアップ
- 自動フィードリンク
- タイトルタグサポート
- エディタースタイル
- ワイドアライメント
- レスポンシブ埋め込み
- 固定ページの抜粋とタグ

## 重要事項

**プラグイン連携**: このテーマは必要最小限のベーステーマとして設計されています。SEO強化、LLMO（大規模言語モデル最適化）、GEO（生成エンジン最適化）などの高度な機能は、「SEO・LLMO・GEO・AIO最適化プラグイン」などの専用プラグインで追加することを想定しています。

## 子テーマ

**公式子テーマサンプルを提供**

安全なカスタマイズのためのサンプル子テーマを用意しています:

**[Backbone SEO LLMO Child Theme](https://github.com/TsuyoshiKashiwazaki/wp-theme-backbone-seo-llmo-child)**

### 子テーマを使う理由

- **安全なアップデート**: 親テーマの更新でカスタマイズが上書きされない
- **簡単なカスタマイズ**: 必要なファイルだけを変更
- **元に戻せる**: 子テーマを無効化すればオリジナルに戻る
- **学習に最適**: カスタマイズしながら親テーマのコードを学習

### クイックスタート

1. [GitHub](https://github.com/TsuyoshiKashiwazaki/wp-theme-backbone-seo-llmo-child)から子テーマをダウンロード
2. 親テーマと子テーマの両方をインストール
3. **子テーマ**を有効化（親テーマではなく）
4. `style.css`、`functions.php`、またはテンプレートファイルでカスタマイズ

詳細は[子テーマドキュメント](https://github.com/TsuyoshiKashiwazaki/wp-theme-backbone-seo-llmo-child)を参照。

## 更新履歴

### [1.0.29] - 2025-12-08
- **追加**: テーマ診断・バックアップページ（`backbone-diagnostics`）を管理メニューに追加
- **追加**: 設定バックアップの作成・復元・削除機能（最大5件まで保持）
- **追加**: サブディレクトリ設定の独立バックアップ機能（`backbone_subdirectory_settings`に自動保存）
- **追加**: カスタマイザー保存時とテーマ切り替え時の自動バックアップ
- **追加**: カスタマイザー変更ログ（最新50件）
- **追加**: theme_modsが空の場合のフォールバック復元機能（独立バックアップから自動復元）
- **改善**: サブディレクトリの追加・削除時に独立バックアップを更新しログに記録

### [1.0.28] - 2025-12-04
- **追加**: タクソノミールートページ（`/tag/`、`/category/`）にタグクラウド表示
- **追加**: タクソノミー一覧ページ用のカスタムクエリ変数 `taxonomy_root`
- **修正**: タクソノミールートページがカスタマイザーの「その他のアーカイブ」レイアウト設定を正しく使用するように
- **修正**: タクソノミールートページに `page-type-archive` ボディクラスが正しく適用されるように

### [1.0.27] - 2025-12-02
- **修正**: `layout-two-columns.css` の不適切な全幅計算によりモバイルでサイドバーコンテンツが切れる問題
- **修正**: `components-sidebar.css` の `overflow: hidden` によりモバイルでサイドバーウィジェットが表示されない問題
- **修正**: モバイルでサイドバーがメインコンテンツの上に表示される順序の問題
- **変更**: 不安定な `width: 100vw` ハックを標準的な `width: 100%` に置き換え
- **変更**: モバイルでのサイドバー順序をデフォルト（メインコンテンツの下）に復元

### [1.0.26] - 2025-11-26
- **追加**: 全投稿タイプ（投稿、カスタム投稿タイプ）に個別レイアウト設定を拡張
- **変更**: カスタマイザー用語と「全幅」ラベルを統一
- **変更**: より広い互換性のためメタボックス定義を更新

### [1.0.25] - 2025-11-25
- **修正**: 親アイテムにホバー時に垂直サブメニュー（3階層以上）が消える問題
- **修正**: 垂直レイアウトの安定性のためホバー領域拡張とJavaScript処理を追加

### [1.0.24] - 2025-11-24
- **追加**: カスタマイザーにSEOメタタグの有効/無効設定（メタディスクリプション/メタキーワード）
- **改善**: 全ページタイプ（ホーム、アーカイブ、検索、404）のメタディスクリプション自動生成
- **改善**: タグ、カテゴリー、コンテンツからのメタキーワード自動抽出
- **追加**: ストップワードフィルタリング付きのインテリジェントキーワード抽出ヘルパー関数

### [1.0.23] - 2025-11-23
- **修正**: プレビューの無限ループを引き起こすカスタマイザーのjQuery依存エラー
- **修正**: カスタマイザーコントロールでのスクリプト重複登録
- **改善**: `wp_add_inline_script` を使用したインラインスクリプト依存関係管理
- **改善**: カスタマイザープレビューとコントロールの適切なスクリプト読み込み順序

### [1.0.22] - 2025-11-18
- **追加**: モバイルメニューブレークポイントのカスタマイザー設定（常に表示/モバイルのみ≤767px/タブレット以下≤1279px）
- **追加**: レスポンシブメニュー制御用のナビゲーションCSS動的出力モジュール
- **追加**: プラグインベースのハンバーガーメニュー機能用 `.active` クラスサポート
- **改善**: プラグイン優先アーキテクチャ - テーマがブレークポイントを制御、プラグインがハンバーガーUIを担当
- **変更**: メニュー表示制御をハードコードCSSからカスタマイザーに委譲
- **修正**: ナビゲーションCSSモジュールのファイルパーミッション問題

### [1.0.21] - 2025-11-17
- **追加**: WordPressネイティブメニューパネルに統合されたナビゲーションメニューカスタマイザー設定
- **追加**: 深い階層のサブメニュー表示方向設定（垂直/水平）
- **変更**: サブメニューのデフォルト方向を水平から垂直（階段状インデント）に変更
- **改善**: 動的表示制御（統一/個別モード）付きの投稿メタ設定
- **改善**: より良いホバー効果とパネルデザインのナビゲーションCSS
- **修正**: 全幅レイアウトでのサブメニュー表示

### [1.0.20] - 2025-11-14
- **追加**: カスタム著者URL設定機能

### [1.0.19] - 2025-11-13
- **変更**: フロントページ設定から「コンテンツ最大幅」を削除、レイアウト設定に「1カラム最大幅」を追加
- **修正**: レイアウト設定とフロントページ設定の矛盾を解消
- **改善**: コンテンツ最大幅が1カラムレイアウトのみに適用され、2カラム・3カラムレイアウトには影響しないように

**現在のバージョン:** 1.0.29 (2025-12-08)

完全なバージョン履歴と詳細な変更点については [CHANGELOG.md](CHANGELOG.md) を参照してください。

## ライセンス

このテーマは GPL v2 以降でライセンスされています。
ライセンス: https://www.gnu.org/licenses/gpl-2.0.html

## サポート・開発

**開発者**: 柏崎 剛（Tsuyoshi Kashiwazaki）
**ウェブサイト**: https://www.tsuyoshikashiwazaki.jp/profile/
**サポート**: このテーマに関するご質問やバグ報告は、開発者ウェブサイトからお問い合わせください。

## コントリビューション

コントリビューションを歓迎します！GitHubでプルリクエストやイシューをお気軽にお寄せください。

---

<div align="center">

**キーワード**: WordPressテーマ, ベーステーマ, SEO, LLMO, メディア最適化, プラグイン拡張, 軽量, レスポンシブ, カスタマイザー, ブログテーマ

Made by [Tsuyoshi Kashiwazaki](https://github.com/TsuyoshiKashiwazaki)

</div>
